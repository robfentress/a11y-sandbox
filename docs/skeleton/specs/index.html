<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Skeleton Demo</title>
    <style>
        /*@media (max-width: 700px) {
            body:before {
                content: "mobile";
                display:none;
            }
        }*/
        .hidden {
            display:none;
        }
        [insert] {
            opacity:.1;
        }
    </style>
    <link href="../css/MenubuttonLinks.css" rel="stylesheet">
    <script src="../js/Menubutton.js" type="text/javascript"></script>
    <script src="../js/MenuItemLinks.js" type="text/javascript"></script>
    <script src="../js/PopupMenuLinks.js" type="text/javascript"></script>
    <script src="../js/Drawer.js" type="text/javascript"></script>
    <!--<script src="../js/MediaQuerySwitch.js" type="text/javascript"></script>-->
    <script src="../js/ModalManager.js" type="text/javascript"></script>
    <!--<script src="../js/ManagedDrawer.js" type="text/javascript"></script>-->
</head>
<body>
<div>
    <nav aria-label="Actions Menu" id="actionsMenu">
        <div role="group" aria-label="Actions" id="actions" class="hidden">
            <ul>
                <li><a href="apply.html">Apply</a></li>
                <li><a href="visit.html">Visit</a></li>
                <li><a href="give.html">Give</a></li>
                <li><a href="shop.html">Shop</a></li>
                <li>
                    <div class="menu_button">
                        <a id="menuButton" role="button" href="#" aria-haspopup="true" aria-expanded="false" aria-controls="menu2">
                            Resources for:
                        </a>

                        <ul id="menu2" role="menu" aria-labelledby="menuButton" tabindex="-1" style="display: none; position: absolute; top: 27.2188px; left: 0px;">
                            <li role="none">
                                <a role="menuitem" href="student.html" tabindex="-1">
                                    Student
                                </a>
                            </li>
                            <li role="none">
                                <a role="menuitem" href="faculty.html" tabindex="-1">
                                    Faculty
                                </a>
                            </li>
                            <li role="none">
                                <a role="menuitem" href="alumni.html" tabindex="-1">
                                    Alumni
                                </a>
                            </li>
                            <li role="none">
                                <a role="menuitem" href="staff.html" tabindex="-1">
                                    Staff
                                </a>
                            </li>
                        </ul>
                    </div>
                </li>
            </ul>
        </div>
    </nav>
    <header>
        <div><a href="home.html">Site home page</a></div>
        <div>slogan</div>
    </header>
    <div role="search" aria-owns="searchDrawer">
        <div id="searchButtons">
            <button id="searchHamburger" aria-controls="searchDrawer" data-toggle="opener" aria-expanded="false">Search</button>
            <button id="searchHamburgerClose" aria-controls="searchDrawer" data-toggle="closer" aria-expanded="true" class="hidden">Close</button>
        </div>
    </div>
    <nav aria-label="Main Menu" aria-owns="menuDrawer">
        <div id="menuButtons">
            <button id="menuHamburger" aria-expanded="false" aria-controls="menuDrawer" data-toggle="opener" aria-expanded="false">Menu</button>
            <button id="menuHamburgerClose" aria-controls="menuDrawer" data-toggle="closer" aria-expanded="true" class="hidden">Close</button>
        </div>
    </nav>
</div>

<div id="searchDrawer" class="hidden" role="group" aria-label="search form">
    <form action="">
        <div>
            <label for="query">Search for:</label> <input type="text" name="query" id="query" placeholder="Search vt.edu">
            <input type="submit" value="Submit">
        </div>
        <fieldset>
            <legend>Search Scope</legend>
            <input type="radio" id="site"> <label for="site">this site</label>
            <input type="radio" id="vt"> <label for="vt">all vt.edu</label>
        </fieldset>
    </form>
</div>

<div id="menuDrawer" class="hidden" role="group" aria-label="Department Name Menu">
    <div>Department Name</div>
    <ul>
        <li><a href="1.html">page 1</a></li>
        <li><a href="2.html">page 2</a></li>
    </ul>
</div>
<main>
    <h1>Skeleton Demo</h1>
    <p>some text after</p>
    <button>After</button>
</main>
<script src="https://cdn.polyfill.io/v2/polyfill.min.js?features=Map,Set,Element.prototype.matches,Node.prototype.contains"></script>
<script src="../js/inert.js" type="text/javascript"></script>

<script type="text/javascript">

  window.onload=function() {
    var nodeList = [
      document.getElementById('actionsMenu'),
      document.querySelector('header'),
      document.querySelector('[aria-owns="searchDrawer"]'),
      document.querySelector('[aria-owns="menuDrawer"]'),
      document.querySelector('main'),
      document.getElementById('searchDrawer'),
      document.getElementById('menuDrawer')
    ];

    var modalmanager = new ModalManager(nodeList);
    modalmanager.init();

    var menuButton = new Menubutton(document.getElementById('menuButton'));
    menuButton.init();

    var menuDrawer = new Drawer(document.getElementById('menuButtons'), modalmanager);
    menuDrawer.init();

    /*var menuManager = new ManagedDrawer(menuDrawer, modalmanager);
    menuManager.init();*/

    var searchDrawer = new Drawer(document.getElementById('searchButtons'), modalmanager);
    searchDrawer.init();

    /*var searchManager = new ManagedDrawer(searchDrawer, modalmanager);
    searchManager.init();*/

    /*var mqSwitch = new MediaQuerySwitch(
      document.styleSheets[0].cssRules[0].conditionText,
      menuDrawer.drawer,
      document.getElementById('actionsMenu'),
      document.getElementById('actions'));
    mqSwitch.init();*/

    /*
        Clicking anywhere causes any open drawers to close and removes the inert attribute from any elements
        Click is captured inside the drawers, so these never get triggered if click is inside the drawers
        */
    window.addEventListener('click', searchDrawer.collapse.bind(searchDrawer));
    //window.addEventListener('click', searchManager.removeInert.bind(searchManager));
    window.addEventListener('click', menuDrawer.collapse.bind(menuDrawer));
    //window.addEventListener('click', menuManager.removeInert.bind(menuManager));
  }

</script>
<script>
</script>
</body>
</html>